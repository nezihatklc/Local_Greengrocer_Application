<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane prefHeight="540.0" prefWidth="960.0"
            xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.group18.greengrocer.controller.CustomerController"
            stylesheets="@../css/style.css">

    <!-- ================= HEADER ================= -->
    <top>
        <VBox>
            <HBox alignment="CENTER_LEFT" spacing="15" styleClass="app-header">
                <children>
                    <Label text="Group18 GreenGrocer" styleClass="heading-2" style="-fx-text-fill: white; -fx-font-size: 24px;">
                    </Label>

                    <Region HBox.hgrow="ALWAYS"/>

                    <Label fx:id="usernameLabel" styleClass="text-white" style="-fx-font-weight: bold;"/>

                    <!-- NAVIGATION BUTTONS -->
                    <Button text="Edit Profile" onAction="#handleEditProfile" styleClass="button-secondary"/>
                           
                    <Button text="Rate Delivery" onAction="#handleRateCarrier" styleClass="button-secondary"/>

                    <Button text="My Orders" onAction="#handleMyOrders" styleClass="button-secondary"/>

                    <Button fx:id="cartButton" text="Cart (0)" onAction="#handleViewCart" styleClass="button-accent"/>

                    <Button text="Message Owner" onAction="#handleMessageOwner" styleClass="button-secondary"/>

                    <Button text="Logout" onAction="#handleLogout" styleClass="button-danger"/>
                </children>

                <padding>
                    <Insets top="10" bottom="10" left="20" right="20"/>
                </padding>
            </HBox>

            <!-- ================= SEARCH BAR ================= -->
            <HBox spacing="15" alignment="CENTER_LEFT" styleClass="sidebar" style="-fx-padding: 15 20;">
                <children>
                    <Label text="Search Products:" styleClass="label" style="-fx-font-weight: bold;"/>
                    <TextField fx:id="searchField"
                               promptText="Search for fresh fruits &amp; vegetables..."
                               onKeyReleased="#handleSearch"
                               prefWidth="350"/>
                </children>
            </HBox>
        </VBox>
    </top>

    <!-- ================= CENTER ================= -->
    <center>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" style="-fx-background-color: transparent;">
            <content>
                <VBox spacing="20" style="-fx-background-color: #F4F6F8;">
                    <padding>
                        <Insets top="20" bottom="20" left="20" right="20"/>
                    </padding>
                    <children>
                        <!-- ORDER TRACKING -->
                        <VBox fx:id="orderTrackingBox" spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 5);" visible="false" managed="false">
                             <HBox alignment="CENTER_LEFT">
                                 <Label text="Current Order Status" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2E7D32;" HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
                                 <Button fx:id="closeTrackingButton" text="X" onAction="#handleCloseTracking" style="-fx-background-color: transparent; -fx-text-fill: gray; -fx-font-weight: bold; -fx-cursor: hand;" visible="false"/>
                             </HBox>
                             <HBox spacing="10" alignment="CENTER_LEFT">
                                 <Label fx:id="statusReceived" text="Received" style="-fx-padding: 5 10; -fx-background-radius: 15; -fx-background-color: #E0E0E0;"/>
                                 <Label text="->" style="-fx-font-weight: bold;"/>
                                 <Label fx:id="statusPreparing" text="Preparing" style="-fx-padding: 5 10; -fx-background-radius: 15; -fx-background-color: #E0E0E0;"/>
                                 <Label text="->" style="-fx-font-weight: bold;"/>
                                 <Label fx:id="statusOnWay" text="On the Way" style="-fx-padding: 5 10; -fx-background-radius: 15; -fx-background-color: #E0E0E0;"/>
                                 <Label text="->" style="-fx-font-weight: bold;"/>
                                 <Label fx:id="statusDelivered" text="Delivered" style="-fx-padding: 5 10; -fx-background-radius: 15; -fx-background-color: #E0E0E0;"/>
                             </HBox>
                             <Label fx:id="trackingOrderIdLabel" text="Order #..." style="-fx-font-style: italic; -fx-text-fill: #666;"/>
                        </VBox>

                        <!-- FRUITS -->
                        <TitledPane text="Fresh Fruits" collapsible="true" expanded="true" style="-fx-font-weight: bold; -fx-text-fill: #2E7D32;">
                            <content>
                                <TilePane fx:id="fruitPane"
                                          prefColumns="4"
                                          hgap="20"
                                          vgap="20"
                                          style="-fx-background-color: transparent;">
                                    <padding>
                                        <Insets top="10" bottom="10" left="10" right="10"/>
                                    </padding>
                                </TilePane>
                            </content>
                        </TitledPane>

                        <!-- VEGETABLES -->
                        <TitledPane text="Fresh Vegetables" collapsible="true" expanded="true" style="-fx-font-weight: bold; -fx-text-fill: #2E7D32;">
                            <content>
                                <TilePane fx:id="vegetablePane"
                                          prefColumns="4"
                                          hgap="20"
                                          vgap="20"
                                          style="-fx-background-color: transparent;">
                                    <padding>
                                        <Insets top="10" bottom="10" left="10" right="10"/>
                                    </padding>
                                </TilePane>
                            </content>
                        </TitledPane>
                    </children>
                </VBox>
            </content>
        </ScrollPane>
    </center>

</BorderPane>
